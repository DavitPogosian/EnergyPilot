# EnergyPilot - Smart Energy Management PWA

EnergyPilot is a mobile-first Progressive Web App that helps residential customers in Luxembourg optimize their energy consumption and costs based on EPEX day-ahead electricity prices.

## Features

### Core Functionality
- **Real-time Price Monitoring**: View EPEX day-ahead prices with 30-minute resolution
- **Smart Device Control**: Manage EV charging, home batteries, and PPAs
- **Strategy Editor**: Create custom charging/discharging schedules or use AI presets
- **Negative Price Alerts**: Get notified when you're paid to use electricity
- **Performance Insights**: Track savings, CO2 impact, and community rankings

### Devices Supported
- Electric Vehicles (EV)
- Home Battery Storage
- Solar Panels
- Power Purchase Agreements (PPA)

### Strategy Presets
1. **SmartShift (AI)**: Automated optimization for maximum savings
2. **ECO Mode**: Prioritizes renewable energy and self-consumption
3. **Peak Shaving**: Maximizes grid arbitrage during peak hours
4. **Custom**: Create your own charging/discharging schedule

## Getting Started

### Installation

\`\`\`bash
# Install dependencies (auto-detected from imports)
npm install

# Run development server
npm run dev
\`\`\`

Open [http://localhost:3000](http://localhost:3000) to view the app.

### First-Time Setup

1. Complete the 3-step onboarding:
   - Configure your devices (EV, battery, solar, PPA)
   - Set comfort preferences (min battery SOC, do-not-disturb hours)
   - Choose your default strategy

2. The app will redirect you to the dashboard

## Project Structure

\`\`\`
app/
├── onboarding/          # 3-step onboarding flow
├── dashboard/           # Main dashboard with price chart
├── devices/             # Device control interface
├── strategy/            # Strategy editor with timeline
├── notifications/       # Alert center
├── insights/            # Performance analytics
├── settings/            # App configuration
└── api/
    ├── prices/          # Mock EPEX price data
    ├── devices/         # Device status and control
    ├── strategy/        # Strategy application
    └── summary/         # Daily summary stats

components/
├── price-chart.tsx      # Interactive price visualization
├── timeline-editor.tsx  # Drag-to-select strategy editor
├── device-card.tsx      # Individual device control
├── bottom-nav.tsx       # Mobile navigation
└── ui/                  # shadcn/ui components

lib/
├── types.ts            # TypeScript interfaces
└── mock-data.ts        # Sample data generation
\`\`\`

## API Endpoints (Mock)

### Get Day-Ahead Prices
\`\`\`typescript
GET /api/prices?date=YYYY-MM-DD
Response: { region: 'LU', date: '2025-11-25', prices: [...] }
\`\`\`

### Get Device Status
\`\`\`typescript
GET /api/devices
Response: { devices: [...] }
\`\`\`

### Control Device
\`\`\`typescript
POST /api/devices/{id}/action
Body: { action: 'charge_now' | 'stop' | 'auto' | ... }
\`\`\`

### Apply Strategy
\`\`\`typescript
POST /api/strategy/apply
Body: { intervals: [...], devices: [...] }
Response: { success: true, estimatedSavings: 12.45 }
\`\`\`

## Replacing Mock APIs

To connect to real APIs, update the following files:

1. **Price Data**: Edit `app/api/prices/route.ts`
   - Replace mock data with real EPEX API calls
   - API: https://transparency.entsoe.eu/ or EPEX SPOT API

2. **Device Control**: Edit `app/api/devices/[id]/action/route.ts`
   - Integrate with your smart home system (e.g., Tesla API, battery APIs)
   - Add authentication and device-specific protocols

3. **Strategy Engine**: Edit `app/api/strategy/apply/route.ts`
   - Implement actual optimization algorithms
   - Connect to device scheduling systems

## Environment Variables

\`\`\`bash
# Add to Vercel project or .env.local
EPEX_API_KEY=your_api_key
DEVICE_API_KEY=your_device_api_key
\`\`\`

## PWA Configuration

The app is configured as a PWA with:
- Manifest file at `/public/manifest.json`
- Service worker support (auto-generated by Next.js)
- Mobile-optimized viewport
- Installable on iOS and Android

## Key Technologies

- **Next.js 16**: App Router with React 19
- **Tailwind CSS v4**: Utility-first styling with custom theme
- **Recharts**: Data visualization for price charts
- **SWR**: Real-time data fetching and caching
- **shadcn/ui**: Accessible component library

## Mobile-First Design

- Bottom navigation for thumb-friendly access
- Touch-optimized timeline editor
- Responsive charts and cards
- Large tap targets (min 44x44px)
- Optimized for 360px - 428px screen widths

## Gamification

- **Community Rankings**: See how you compare to other users in your area
- **Savings Streaks**: Track consecutive days using optimization
- **Performance Badges**: Earn titles like "Elite Saver"

## Accessibility

- ARIA labels on all interactive elements
- Keyboard navigation support
- Screen reader optimized
- High contrast color themes
- Semantic HTML structure

## License

MIT License - Built with v0 by Vercel

## Support

For issues or questions, please open an issue on the repository.
